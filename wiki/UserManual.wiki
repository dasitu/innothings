=1	整体设计架构=

采用PHP+MySQL的方式，提供HTTP接口。
鉴于安全考虑，接口一律使用HTTPS传输，测试接口可以使用HTTP.

==1.1	Server环境==
Linux + MySQL + Apache(Nginx) + PHP

==1.2	数据库结构==
数据库分为类似的两套表架构，一套保存所有的数据，称为全数据表，用后缀为_all的表来标识，用户不能通过API对全数据表内容进行操作。另外一套则保存当前用户的数据，称为当前表。两者之间通过一系列定义在数据库中的触发器来完成如下的关系：
•	插入当前表的数据，将插入到全数据表同一ID的数据。
•	更新当前表的数据，将更新到全数据表同一ID的数据。
•	删除当前表的数据，将更新全数据表中同一ID的数据删除时间，并更新删除标记为1。
每套表本别包括, 一下四张，相互通过外键关联，对表的删除操作有级联删除的触发器。这意味这如果你删除一个用户，此用户相关的设备，传感器，数据都将删除。同时出发对全数据表的更新。
•	用户表 user
•	设备表 device
•	传感器表 sensor
•	数据表datapoint

数据库表结构，外键关联与唯一约束，请参考数据库描述文档。
=2	API介绍=

==2.1	用户相关的API==
===2.1.1	创建单个新用户===
====2.1.1.1	输入====

HTTP Header
{{{
POST http://198.23.226.199/innoapi/user HTTP/1.1
}}}
HTTP Body
{{{
{
	"usr_name": "test1",
	"usr_pwd":"test1",
	"usr_email":"test@test"
}
}}}
====2.1.1.2	输出====

HTTP Header
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 12:27:00 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 14
Content-Type: application/json
}}}
HTTP Body
{{{
{"usr_id":"2"}
}}}
====2.1.1.3	异常情况====
=====2.1.1.3.1	输入数据不完整=====

输入1：usr_pwd 缺失
HTTP Header
{{{
POST http://198.23.226.199/innoapi/user HTTP/1.1
}}}
HTTP Body
{{{
{
	"usr_name": "test1",
	"usr_email":"test@test"
}
}}}
输入2：usr_name缺失
HTTP Header
{{{
POST http://198.23.226.199/innoapi/user HTTP/1.1
}}}
HTTP Body
{{{
{
	"usr_pwd":"test1",
	"usr_email":"test@test"
}
}}}
输入3：整个信息缺失
HTTP Header
{{{
POST http://198.23.226.199/innoapi/user HTTP/1.1
}}}
HTTP Body
{{{
}}}

输出：
HTTP Header
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 12:23:16 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: User name and password is the mandatory parameters
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

=====2.1.1.3.2	用户名重复=====

输入：test1已经存在于数据库中

HTTP Header
{{{
POST http://198.23.226.199/innoapi/user HTTP/1.1
}}}
HTTP Body
{{{
{
	"usr_name": "test1",
	"usr_pwd":"test1",
	"usr_email":"test@test"
}
}}}
输出：
HTTP Header
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 12:25:00 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: User name is already existed!
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

===2.1.2	获得单个用户的信息===
====2.1.2.1	输入====

HTTP Header
{{{
GET http://198.23.226.199/innoapi/user/1 HTTP/1.1
API-KEY:427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
}}}

====2.1.2.2	输出====

HTTP Header
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 12:31:40 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 185
Content-Type: application/json
}}}
HTTP Body
{{{
{"usr_id":"1","usr_name":"test1","usr_email":"test@test","usr_key":"427315b472e04c41c1eb91316c4e66ad","usr_created_time":"2013-11-20 10:14:39","usr_modified_time":"2013-11-20 10:14:39"}
}}}
====2.1.2.3	异常情况====

=====2.1.2.3.1	HTTP请求中未包含API-KEY或者不正确=====

输入1：API-KEY缺失
HTTP Header
{{{
GET http://198.23.226.199/innoapi/user/1 HTTP/1.1
}}}
HTTP Body
{{{
}}}

输入2：给定的API-KEY找不到任何匹配的用户
HTTP Header
{{{
GET http://198.23.226.199/innoapi/user/1 HTTP/1.1
API-KEY:427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
}}}

输出：
HTTP Header
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 12:32:52 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: Invalid API-KEY
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

=====2.1.2.3.2	HTTP请求URL中用户ID与API-KEY不匹配=====

输入：给定的API-KEY所对应的用户ID不是1
HTTP Header
{{{
GET http://198.23.226.199/innoapi/user/1 HTTP/1.1
API-KEY:427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
}}}

输出：
HTTP Header
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 12:42:41 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: You are not allowed to see other user
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

===2.1.3	更新单个用户信息===
====2.1.3.1	输入====

HTTP Header
{{{
PUT http://198.23.226.199/innoapi/user/1 HTTP/1.1
API-KEY: 427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
{
	"usr_name": "test1",
	"usr_pwd":"test2",
	"usr_email":"test@test"
}
}}}
====2.1.3.2	输出====

HTTP Header
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 12:54:27 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 13
Content-Type: application/json
}}}
HTTP Body
{{{
{"success":1}
}}}

====2.1.3.3	异常情况====

=====2.1.3.3.1	HTTP请求URL中用户ID与API-KEY不匹配=====

输入：给定的API-KEY所对应的用户ID不是2
HTTP Header
{{{
PUT http://198.23.226.199/innoapi/user/2 HTTP/1.1
API-KEY:427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
}}}

输出：
HTTP Header
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 12:56:03 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: You are not allowed to update other user
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

=====2.1.3.3.2	输入数据不完整=====

输入1：usr_pwd 缺失
HTTP Header
{{{
PUT  http://198.23.226.199/innoapi/user/1 HTTP/1.1
API-KEY:427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
{
	"usr_name": "test1",
	"usr_email":"test@test"
}
}}}
输入2：usr_name缺失
HTTP Header
{{{
PUT  http://198.23.226.199/innoapi/user/1 HTTP/1.1
API-KEY:427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
{
	"usr_pwd":"test1",
	"usr_email":"test@test"
}
}}}

输入3：整个信息缺失
HTTP Header
{{{
PUT  http://198.23.226.199/innoapi/user/1 HTTP/1.1
API-KEY:427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
}}}

输出：
HTTP Header
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 12:23:16 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: User name and password is the mandatory parameters
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

===2.1.4	删除单个用户===
====2.1.4.1	输入====

HTTP Header
{{{
DELETE http://198.23.226.199/innoapi/user/2 HTTP/1.1
API-KEY: 427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
}}}

====2.1.4.2	输出====

HTTP Header
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:04:27 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 13
Content-Type: application/json
}}}
HTTP Body
{{{
{"success":1}
}}}
====2.1.4.3	异常输出====
=====2.1.4.3.1	HTTP请求URL中用户ID与API-KEY不匹配=====

输入：给定的API-KEY所对应的用户ID不是2
HTTP Header
{{{
DELETE http://198.23.226.199/innoapi/user/2 HTTP/1.1
API-KEY: 427315b472e04c41c1eb91316c4e66ad
}}}
HTTP Body
{{{
}}}

输出：
HTTP Header
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 13:02:20 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: You are not allowed to delete other user
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

==2.2	设备相关的API==
===2.2.1	创建单个新的设备===
====2.2.1.1	输入====

HTTP Header 
{{{
POST http://198.23.226.199/innoapi/device HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
{
	"dev_name":"test1",
	"dev_sn":"test_sn_ssssss",
	"dev_desc":"no desc test 1",
	"dev_lat":0.444,
	"dev_lon":0.555
}
}}}
====2.2.1.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:07:02 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 14
Content-Type: application/json
}}}
HTTP Body
{{{
{"dev_id":"1"}
}}}

====2.2.1.3	异常情况====
=====2.2.1.3.1	设备串号重复=====

输入：test_sn_ssssss已经存在于数据库中
HTTP Header 
{{{
POST http://198.23.226.199/innoapi/device HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
{
	"dev_name":"test1",
	"dev_sn":"test_sn_ssssss",
	"dev_desc":"no desc test 1",
	"dev_lat":0.444,
	"dev_lon":0.555
}
}}}

输出：
HTTP Header 
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 13:10:40 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: dev_sn is already existed!
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

===2.2.2	获得单个设备的信息===
====2.2.2.1	输入====

HTTP Header 
{{{
GET http://198.23.226.199/innoapi/device/1 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
}}}

====2.2.2.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:12:47 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 219
Content-Type: application/json
}}}
HTTP Body
{{{
{
"dev_id":"1",
"usr_id":"2",
"dev_name":"test1",
"dev_sn":"test_sn_ssssss",
"dev_desc":"no desc test 1",
"dev_lat":"0.444",
"dev_lon":"0.555",
"dev_created_time":"2013-11-25 16:07:02",
"dev_modified_time":"2013-11-25 16:07:02"
}
}}}

====2.2.2.3	异常输出====
=====2.2.2.3.1	没找到相应的设备=====

输入：设备ID为2的记录不存在或不属于该API-KEY所对应的用户
HTTP Header 
{{{
GET http://198.23.226.199/innoapi/device/1 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
{
	"dev_name":"test1",
	"dev_sn":"test_sn_ssssss",
	"dev_desc":"no desc test 1",
	"dev_lat":0.444,
	"dev_lon":0.555
}
}}}

输出：
HTTP Header 
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 13:15:51 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: No records
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

===2.2.3	获得当前用户所有设备的信息===
====2.2.3.1	输入====

HTTP Header 
{{{
GET http://198.23.226.199/innoapi/device HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
}}}

====2.2.3.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:19:58 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 440
Content-Type: application/json
}}}
HTTP Body
{{{
[
{
"dev_id":"1",
"usr_id":"2",
"dev_name":"test1",
"dev_sn":"test_sn_ssssss",
"dev_desc":"no desc test 1",
"dev_lat":"0.444",
"dev_lon":"0.555",
"dev_created_time":"2013-11-25 16:07:02",
"dev_modified_time":"2013-11-25 16:07:02"
},
{
"dev_id":"2",
"usr_id":"2",
"dev_name":"test1",
"dev_sn":"test_sn_ssss2",
"dev_desc":"no desc test 1",
"dev_lat":"0.444",
"dev_lon":"0.555",
"dev_created_time":"2013-11-25 16:19:46",
"dev_modified_time":"2013-11-25 16:19:46"
}
]
}}}

====2.2.3.3	异常输出====
=====2.2.3.3.1	没找到相应的设备=====

输入：没有找到属于该API-KEY所对应的用户的设备
HTTP Header 
{{{
GET http://198.23.226.199/innoapi/device HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
}}}

输出：
HTTP Header 
{{{
HTTP/1.1 400 Bad Request
Date: Mon, 25 Nov 2013 13:15:51 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
X-Status-Reason: No records
Content-Length: 0
Connection: close
Content-Type: text/html
}}}
HTTP Body
{{{
}}}

===2.2.4	更新单个设备的信息===
====2.2.4.1	输入====

HTTP Header 
{{{
PUT http://198.23.226.199/innoapi/device/1 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
{
	"dev_name":"test1",
	"dev_sn":"test_sn_sssss1",
	"dev_desc":"no desc test 1",
	"dev_lat":0.444,
	"dev_lon":0.555
}
}}}
====2.2.4.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:24:16 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 13
Content-Type: application/json
}}}
HTTP Body
{{{
{"success":1}
}}}
====2.2.4.3	异常输出====

===2.2.5	删除单个设备===
====2.2.5.1	输入====

HTTP Header 
{{{
DELETE http://198.23.226.199/innoapi/device/2 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
}}}

====2.2.5.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:26:41 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 13
Content-Type: application/json
}}}
HTTP Body
{{{
{"success":1}
}}}

===2.2.5.3	异常输出===

==2.3	传感器相关的API==
===2.3.1	创建单个新的传感器===
====2.3.1.1	输入====

HTTP Header 
{{{
POST http://198.23.226.199/innoapi/device/1/sensor HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
{
	"sen_name":"sensor1",
	"sen_desc":"test sensor",
	"sen_unit":"Temp",
	"sen_unit_symbol":"C"
}
}}}
====2.3.1.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:28:46 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 14
Content-Type: application/json
}}}
HTTP Body
{{{
{"sen_id":"1"}
}}}

====2.3.1.3	异常输出====

===2.3.2	获得单个传感器的信息===
====2.3.2.1	输入====

HTTP Header 
{{{
GET http://198.23.226.199/innoapi/device/1/sensor/1 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
}}}

====2.3.2.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:29:50 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 211
Content-Type: application/json
}}}
HTTP Body
{{{
[
{
"sen_id":"1",
"dev_id":"1",
"sen_name":"sensor1",
"sen_desc":"test sensor",
"sen_unit":"Temp",
"sen_unit_symbol":"C",
"sen_created_time":"2013-11-25 16:28:46",
"sen_modified_time":"2013-11-25 16:28:46",
"usr_id":"2"
}
]
}}}

====2.3.2.3	异常输出====

===2.3.3	获得指定设备下所有的传感器信息===
====2.3.3.1	输入====

HTTP Header 
{{{
GET http://198.23.226.199/innoapi/device/1/sensor HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
}}}
====2.3.3.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:31:10 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 421
Content-Type: application/json
}}}
HTTP Body
{{{
[
{
"sen_id":"1",
"dev_id":"1",
"sen_name":"sensor1",
"sen_desc":"test sensor",
"sen_unit":"Temp",
"sen_unit_symbol":"C",
"sen_created_time":"2013-11-25 16:28:46",
"sen_modified_time":"2013-11-25 16:28:46",
"usr_id":"2"
},
{
"sen_id":"2",
"dev_id":"1",
"sen_name":"sensor1",
"sen_desc":"test sensor",
"sen_unit":"Temp",
"sen_unit_symbol":"C",
"sen_created_time":"2013-11-25 16:31:00",
"sen_modified_time":"2013-11-25 16:31:00",
"usr_id":"2"
}
]
}}}

====2.3.3.3	异常输出====

===2.3.4	更新单个传感器信息===
====2.3.4.1	输入====

HTTP Header 
{{{
PUT http://198.23.226.199/innoapi/device/1/sensor/2 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
{
	"sen_name":"sensor2",
	"sen_desc":"test sensor2",
	"sen_unit":"Temp",
	"sen_unit_symbol":"C"
}
}}}
====2.3.4.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:32:35 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 13
Content-Type: application/json
}}}
HTTP Body
{{{
{"success":1}
}}}
====2.3.4.3	异常输出====

===2.3.5	删除单个传感器===
====2.3.5.1	输入====

HTTP Header 
{{{
DELETE http://198.23.226.199/innoapi/device/1/sensor/2 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
}}}

====2.3.5.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:33:31 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 13
Content-Type: application/json
}}}
HTTP Body
{{{
{"success":1}
}}}

====2.3.5.3	异常输出====

==2.4	数据相关的API==
===2.4.1	写入单个数据===
====2.4.1.1	输入====
=====2.4.1.1.1	单值类型=====
HTTP Header 
{{{
POST http://198.23.226.199/innoapi/device/1/sensor/1/datapoint HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
{
"timestamp":"2012-03-15T16:13:14",
"value":294.34,
"type": "value"
}
}}}
=====2.4.1.1.2	其它Json类型=====
HTTP Header 
{{{
POST http://198.23.226.199/innoapi/device/1/sensor/1/datapoint HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
{
"timestamp":"2012-03-15T16:13:14",
"value":{"lat":35.4567,"lng":46.1234,"speed":98.2,"offset":"yes"},
"type":"gen"
}
}}}

====2.4.1.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:38:03 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 14
Content-Type: application/json
}}}
HTTP Body
{{{
{"dat_id":"2"}
}}}

====2.4.1.3	异常输出====

===2.4.2	根据指定的时间段读取所有相关数据===
====2.4.2.1	输入====

HTTP Header 
{{{
GET http://198.23.226.199/innoapi/device/1/sensor/1/datapoint HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
starttime: 2012-03-11 13:14
endtime: 2013-03-16 5:24
}}}
HTTP Body
{{{
}}}

====2.4.2.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:41:01 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 416
Content-Type: application/json
}}}
HTTP Body
{{{
[
{
"dat_id":"1",
"sen_id":"1",
"dat_time":"2012-03-15 16:13:14",
"dat_value":"294.34",
"dat_type":"value",
"dat_created_time":"2013-11-25 16:35:01",
"dat_modified_time":"2013-11-25 16:35:01"
},
{
"dat_id":"2",
"sen_id":"1",
"dat_time":"2012-03-15 16:13:14",
"dat_value": {
                       "lat":35.4567,
                      "lng":46.1234,
                      "speed":98.2,
                      "offset":"yes"
},
"dat_type":"gen",
"dat_created_time":"2013-11-25 16:38:03",
"dat_modified_time":"2013-11-25 16:38:03"
}
]
}}}

====2.4.2.3	异常输出====

===2.4.3	读取单个数据===
====2.4.3.1	输入====

HTTP Header 
{{{
GET http://198.23.226.199/innoapi/device/1/sensor/1/datapoint/1 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
}}}

====2.4.3.2	输出====
HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:42:34 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 209
Content-Type: application/json
}}}
HTTP Body
{{{
{"dat_id":"1","sen_id":"1","dat_time":"2012-03-15 16:13:14","dat_value":"294.34","dat_type":"value","dat_created_time":"2013-11-25 16:35:01","dat_modified_time":"2013-11-25 16:35:01","dev_id":"1","usr_id":"2"}
}}}

====2.4.3.3	异常输出====

===2.4.4	更新单个数据===
====2.4.4.1	输入====

HTTP Header 
{{{
PUT http://198.23.226.199/innoapi/device/1/sensor/1/datapoint/1 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
{
  "timestamp":"2012-03-15T16:13:14",
  "value":274.34,
"type": "value"
}
}}}

====2.4.4.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:43:58 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 13
Content-Type: application/json
}}}
HTTP Body
{{{
{"success":1}
}}}

====2.4.4.3	异常输出====

===2.4.5	删除单个数据===
====2.4.5.1	输入====

HTTP Header 
{{{
DELETE http://198.23.226.199/innoapi/device/1/sensor/1/datapoint/1 HTTP/1.1
API-KEY: 8d37d11a685ba18a46a1b3c207ea969b
}}}
HTTP Body
{{{
}}}

====2.4.5.2	输出====

HTTP Header 
{{{
HTTP/1.1 200 OK
Date: Mon, 25 Nov 2013 13:45:02 GMT
Server: Apache/2.4.4 (Unix) OpenSSL/1.0.1e PHP/5.5.3 mod_perl/2.0.8-dev Perl/v5.16.3
X-Powered-By: PHP/5.5.3
Content-Length: 13
Content-Type: application/json
}}}
HTTP Body
{{{
{"success":1}
}}}

====2.4.5.3	异常输出====